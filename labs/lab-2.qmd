---
title: "Lab 2 - Maps & Census Data"
author: "Hamish Gibbs"
institute:
  - Network Science Institute, Northeastern University
  - NETS 7983 Computational Urban Science
  - Last updated `r Sys.Date()`
format: html
code-line-numbers: false
execute:
  echo: true
#  cache: true
  warning: false
  messages: false
editor: visual
logo: ./img/sunlab.png
footer: "CUS, Northeastern Spring 2025"
link-external-icon: true
link-external-newwindow: true
bibliography: references.bib
---

## Objective

In this lab, we will learn to:

-   Retrieve, process, and analyze census data.
-   Combine census data with geographical boundaries.
-   Combine geo-referenced census data with other spatial features (from Open Street Map) for analysis.
-   Create a meaningful visualization that conveys insights from the combination of census and built environment features.

## Before starting:

1.  **Ensure you have access to the `stella` server:**
    -   Data for this lab can be found in `/data/CUS/labs/2/`.
2.  [**Request a U.S. Census Data API Key**](https://api.census.gov/data/key_signup.html)
3.  Configure the API key in your R environment

``` r
    Sys.setenv(CENSUS_API_KEY = "YOUR_API_KEY")
```

-   Then call the `tidycensus::census_api_key` function:

    ```{r}
    census_api_key(Sys.getenv("CENSUS_API_KEY"), install = TRUE)
    ```

## Loading Census Data

```{r}
library(tidycensus)
 
```

## Mapping Census Data

## Mapping OSM data

## Combining census data with OSM

## Practical: Viewing health inequalities through the lens of the transit network

## Challenge: Extend this analysis

-   Extend your analysis to other census variables

-   Extend your analysis to another city (try to write code that will work for both cities / any city)

## Closing thoughts

-   What factors in the census explain differences in health outcomes by tube stations? What factors might play a role but are missing from the census?